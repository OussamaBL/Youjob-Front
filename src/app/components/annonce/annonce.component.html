<app-navbar />
<div class="container mx-auto p-4">
  <h1 class="text-3xl font-bold text-center mb-6">Annonces</h1>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="flex justify-center items-center">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <!-- Table -->
  <table *ngIf="!loading" class="min-w-full border-collapse border border-gray-300 shadow-md">
    <thead class="bg-blue-500 text-white">
    <tr>
      <th class="p-2 border">Title</th>
      <th class="p-2 border">Description</th>
      <th class="p-2 border">Category</th>
      <th class="p-2 border">Price</th>
      <th class="p-2 border">Location</th>
      <th class="p-2 border">Date creation</th>
      <th class="p-2 border">Status</th>
      <th class="p-2 border">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let annonce of annonces" class="hover:bg-gray-100">
      <td class="p-2 border">{{ annonce.title }}</td>
      <td class="p-2 border">{{ annonce.description }}</td>
      <td class="p-2 border">{{ annonce.category }}</td>
      <td class="p-2 border">{{ annonce.price }} $</td>
      <td class="p-2 border">{{ annonce.location }}</td>
      <td class="p-2 border">{{ annonce.createdDate }}</td>
      <td class="p-2 border">{{ annonce.status }}</td>
      <td class="p-2 border">
        <button *ngIf="annonce.status=='ACTIVE'" (click)="deleteAnnonce(annonce.id)" class="text-red-600 hover:text-red-800">
          Delete
        </button>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div *ngIf="!loading" class="flex justify-center mt-4 space-x-4">
    <button
      (click)="prevPage()"
      [disabled]="page === 0"
      class="bg-gray-300 px-4 py-2 rounded disabled:opacity-50"
    >
      Previous
    </button>

    <span class="text-lg font-semibold"> Page {{ page + 1 }} of {{ totalPages }} </span>

    <button
      (click)="nextPage()"
      [disabled]="page >= totalPages - 1"
      class="bg-gray-300 px-4 py-2 rounded disabled:opacity-50"
    >
      Next
    </button>
  </div>
</div>
<app-footer />
